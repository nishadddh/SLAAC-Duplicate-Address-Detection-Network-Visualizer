<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLAAC-DAD Network Visualizer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #45a049;
        }

        .network-visualization {
            position: relative;
            height: 400px;
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow: hidden;
        }

        .router {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background-color: #2196F3;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 2;
        }

        .device {
            position: absolute;
            width: 80px;
            height: 80px;
            background-color: #4CAF50;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .device:hover {
            transform: scale(1.1);
        }

        .connection-line {
            position: absolute;
            background-color: #90A4AE;
            height: 2px;
            transform-origin: left center;
            z-index: 1;
        }

        .allocated-ips {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .allocated-ips h3 {
            margin-top: 0;
            color: #333;
        }

        .ip-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .ip-table th, .ip-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .ip-table th {
            background-color: #f5f5f5;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        .status-indicator.active {
            background-color: #4CAF50;
        }

        .status-indicator.duplicate {
            background-color: #f44336;
        }

        .device-tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 3;
            display: none;
        }
    </style>
    </head>
    <body>
        <div class="container">
            <h1>SLAAC-Duplicate Address Detection Network Visualizer</h1>
            
            <div class="grid">
                <div class="panel">
                    <h2>Address Generation</h2>
                    <div class="form-group">
                        <label for="prefix">Network Prefix (binary):</label>
                         <h5>eg : 11010110 01101001 10100101 01011010 10011001 01101001 10101010 01010101</h5>

                        <input type="text" id="prefix" placeholder="Enter network prefix in binary format">
                    </div>
                    <div class="form-group">
                        <label for="deviceType">Device Type:</label>
                        <select id="deviceType">
                            <option value="pc">PC</option>
                            <option value="laptop">Laptop</option>
                            <option value="mobile">Mobile Device</option>
                            <option value="iot">IoT Device</option>
                        </select>
                    </div>
                    <button onclick="generateAddress()">Generate Address</button>
    
                    <div class="allocated-ips">
                        <h3>Allocated IP Addresses</h3>
                        <table class="ip-table">
                            <thead>
                                <tr>
                                    <th>Device</th>
                                    <th>IP Address</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="ipTableBody">
                                <!-- IP entries will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
    
                    <div class="form-group">
                        <label for="checkIP">Check Duplicate IP Address:</label>
                        <input type="text" id="checkIP" placeholder="Enter IP address to check">
                        <button onclick="checkManualDuplicate()">Check</button>
                    </div>
                </div>
    
                <div class="panel">
                    <div class="network-visualization" id="networkViz">
                        <div class="router">
                            <i class="fas fa-router fa-2x"></i>
                            <div>Router</div>
                        </div>
                        <div class="device-tooltip" id="deviceTooltip"></div>
                    </div>
                </div>
            </div>
        </div>
    
        <script>
            const allocatedIPs = [];
    
            // Function to convert binary prefix input to hexadecimal IPv6 prefix
            function binaryToHex(binary) {
                let hex = '';
                for (let i = 0; i < binary.length; i += 16) {
                    let segment = parseInt(binary.slice(i, i + 16), 2).toString(16).padStart(4, '0');
                    hex += segment + ':';
                }
                return hex.slice(0, -1); // Remove the trailing colon
            }
    
            function addDevice(deviceType, ip) {
                const networkViz = document.getElementById('networkViz');
                const device = document.createElement('div');
                device.classList.add('device');
                device.innerText = deviceType;
                const pos = {
                    x: Math.random() * (networkViz.clientWidth - 80),
                    y: Math.random() * (networkViz.clientHeight - 80),
                };
                device.style.left = `${pos.x}px`;
                device.style.top = `${pos.y}px`;
    
                device.addEventListener('mouseover', () => {
                    const tooltip = document.getElementById('deviceTooltip');
                    tooltip.innerText = `IP: ${ip}`;
                    tooltip.style.left = `${pos.x + 50}px`;
                    tooltip.style.top = `${pos.y}px`;
                    tooltip.style.display = 'block';
                });
    
                device.addEventListener('mouseleave', () => {
                    const tooltip = document.getElementById('deviceTooltip');
                    tooltip.style.display = 'none';
                });
    
                networkViz.appendChild(device);
            }
    
            function updateIPTable(deviceType, ip, status) {
                const ipTableBody = document.getElementById('ipTableBody');
                const row = document.createElement('tr');
                row.innerHTML = `<td>${deviceType}</td><td>${ip}</td><td class="status-indicator ${status}"></td>`;
                ipTableBody.appendChild(row);
            }
    
            function generateAddress() {
                const binaryPrefix = document.getElementById('prefix').value;
                const deviceType = document.getElementById('deviceType').value;
    
                // Convert the binary prefix to hexadecimal format
                const ipv6Prefix = binaryToHex(binaryPrefix);
    
                // Generate a random suffix for the IPv6 address
                const randomSuffix = Array(4)
                    .fill(null)
                    .map(() => Math.floor(Math.random() * 65536).toString(16).padStart(4, '0'))
                    .join(':');
                const ip = `${ipv6Prefix}:${randomSuffix}`;
    
                if (allocatedIPs.includes(ip)) {
                    alert("Duplicate IP Address detected!");
                    updateIPTable(deviceType, ip, 'duplicate');
                } else {
                    allocatedIPs.push(ip);
                    addDevice(deviceType, ip);
                    updateIPTable(deviceType, ip, 'active');
                }
            }
    
            function checkManualDuplicate() {
                const ipToCheck = document.getElementById('checkIP').value;
                if (allocatedIPs.includes(ipToCheck)) {
                    alert("Duplicate IP Address found!");
                } else {
                    alert("No duplicate IP Address found.");
                }
            }
        </script>
    </body>
    </html>
    
